{%- if theme.footer.beian.enable %}
  <div class="beian">
    {{- next_url('https://beian.miit.gov.cn', theme.footer.beian.icp + ' ') }}
    {%- if theme.footer.beian.gongan_icon_url %}
      <img src="{{ url_for(theme.footer.beian.gongan_icon_url) }}" alt="">
    {%- endif %}
    {%- if theme.footer.beian.gongan_id and theme.footer.beian.gongan_num %}
      {{- next_url('http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=' + theme.footer.beian.gongan_id, theme.footer.beian.gongan_num + ' ') }}
    {%- endif %}
  </div>
{%- endif %}

<div class="copyright">
  {%- set copyright_year = date(null, 'YYYY') %}
  &copy; {% if theme.footer.since and theme.footer.since != copyright_year %}{{ theme.footer.since }} – {% endif %}
  <span itemprop="copyrightYear">{{ copyright_year }}</span>
  <span class="with-love">
    <i class="{{ theme.footer.icon.name }}"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">{{ theme.footer.copyright or author }}</span>
  {# <span class="icp" style="padding-left:10px" itemprop="copyrightHolder">
    <a href="https://beian.miit.gov.cn/#/Integrated/index">豫ICP备2021025081号</a>
  </span>
  <span class="icp" style="padding-left:10px" itemprop="copyrightHolder">
    <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41152302000171">
      <img src="../../source/images/备案图标.png" >豫公网安备 41152302000171号</a>
  </span> #}
</div>

{%- if config.symbols_count_time.total_symbols or config.symbols_count_time.total_time %}
  <div class="wordcount">
    {%- if config.symbols_count_time.total_symbols %}
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="fa fa-chart-line"></i>
        </span>
        {%- if theme.symbols_count_time.item_text_total %}
          <span>{{ __('symbols_count_time.count_total') + __('symbol.colon') }}</span>
        {%- endif %}
        <span title="{{ __('symbols_count_time.count_total') }}">{{ symbolsCountTotal(site) }}</span>
      </span>
    {%- endif %}

    {%- if config.symbols_count_time.total_time %}
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="fa fa-coffee"></i>
        </span>
        {%- if theme.symbols_count_time.item_text_total %}
          <span>{{ __('symbols_count_time.time_total') }} &asymp;</span>
        {%- endif %}
        <span title="{{ __('symbols_count_time.time_total') }}">{{ symbolsTimeTotal(site, config.symbols_count_time.awl, config.symbols_count_time.wpm, __('symbols_count_time.time_minutes')) }}</span>
      </span>
    {%- endif %}
  </div>
{%- endif %}

{%- if theme.busuanzi_count.enable %}
  <div class="busuanzi-count">
    {%- if theme.busuanzi_count.total_visitors %}
      <span class="post-meta-item" id="busuanzi_container_site_uv">
        <span class="post-meta-item-icon">
          <i class="{{ theme.busuanzi_count.total_visitors_icon }}"></i>
        </span>
        <span class="site-uv" title="{{ __('footer.total_visitors') }}">
          <span id="busuanzi_value_site_uv"></span>
        </span>
      </span>
    {%- endif %}

    {%- if theme.busuanzi_count.total_views %}
      <span class="post-meta-item" id="busuanzi_container_site_pv">
        <span class="post-meta-item-icon">
          <i class="{{ theme.busuanzi_count.total_views_icon }}"></i>
        </span>
        <span class="site-pv" title="{{ __('footer.total_views') }}">
          <span id="busuanzi_value_site_pv"></span>
        </span>
      </span>
    {%- endif %}
  </div>
{%- endif %}

<script>
  //   自定义邮箱审核规则
  document
    .body
    .addEventListener('click', function (e) {
      if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
          const str = `<div class="valert text-center"><div class="vtext" style="color:red">请填写正确的昵称和邮箱！</div></div>`;
          const vmark = document.querySelector('.vmark');
          vmark.innerHTML = str;
          vmark.style.display = 'block';
          setTimeout(function () {
            vmark.style.display = 'none';
            vmark.innerHTML = '';
          }, 2500);
        }
      }
    })
</script>